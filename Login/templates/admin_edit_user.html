{% extends "base.html" %}

{% block content %}
<h2>Edit User</h2>
<p>Editing user: <strong>{{ user.username }}</strong></p>
<hr>

<form method="post">
    <div class="form-group">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" value="{{ user.username }}" required>
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" value="{{ user.email }}" required>
    </div>
    <div class="form-group">
        <label for="password">New Password (leave blank to keep current)</label>
        <input type="password" name="password" id="password" placeholder="Enter new password or leave blank">
    </div>
    
    <div class="user-info" style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0;">
        <h4>Current User Information:</h4>
        <p><strong>User ID:</strong> {{ user.id }}</p>
        <p><strong>Current Username:</strong> {{ user.username }}</p>
        <p><strong>Current Email:</strong> {{ user.email }}</p>
        <p><strong>WebAuthn Credentials:</strong> 
            {% if user.credentials %}
                {{ user.credentials|length }} credential(s) registered
            {% else %}
                No WebAuthn credentials
            {% endif %}
        </p>
    </div>
    
    <div class="form-actions">
        <button type="submit" style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">
            Update User
        </button>
        <a href="{{ url_for('admin_dashboard') }}" 
           style="background-color: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            Cancel
        </a>
    </div>
</form>

<style nonce="{{ csp_nonce }}">
.form-group {
    margin-bottom: 15px;
}
.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}
.form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
}
.form-actions {
    margin-top: 20px;
}
button:hover, a:hover {
    opacity: 0.8;
}
</style>
{% endblock %}
