// Multi-language translations for the newsletter app
const translations = {
    en: {
        language: "Language:",
        newsSource: "News Source:",
        refresh: "ðŸ”„ Refresh News",
        loading: "Loading news...",
        error: "Unable to load news. Please try again later.",
        retry: "Try Again",
        footer: "Â© 2024 Newsletter App - News for Everyone",
        readMore: "Read More",
        publishedAt: "Published:",
        source: "Source:",
        noImage: "No image available",
        generalNews: "General News",
        stSingapore: "Straits Times - Singapore",
        stAsia: "Straits Times - Asia",
        stWorld: "Straits Times - World",
        stBusiness: "Straits Times - Business",
        stTech: "Straits Times - Tech",
        bbcNews: "BBC News",
        cnn: "CNN",
        reuters: "Reuters",
        associatedPress: "Associated Press",
        timesOfIndia: "Times of India"
    },
    zh: {
        language: "è¯­è¨€:",
        newsSource: "æ–°é—»æ¥æº:",
        refresh: "ðŸ”„ åˆ·æ–°æ–°é—»",
        loading: "æ­£åœ¨åŠ è½½æ–°é—»...",
        error: "æ— æ³•åŠ è½½æ–°é—»ã€‚è¯·ç¨åŽå†è¯•ã€‚",
        retry: "é‡è¯•",
        footer: "Â© 2024 æ–°é—»åº”ç”¨ - ä¸ºæ¯ä¸ªäººæä¾›æ–°é—»",
        readMore: "é˜…è¯»æ›´å¤š",
        publishedAt: "å‘å¸ƒæ—¶é—´:",
        source: "æ¥æº:",
        noImage: "æ— å›¾ç‰‡",
        generalNews: "ç»¼åˆæ–°é—»",
        stSingapore: "æµ·å³¡æ—¶æŠ¥ - æ–°åŠ å¡",
        stAsia: "æµ·å³¡æ—¶æŠ¥ - äºšæ´²",
        stWorld: "æµ·å³¡æ—¶æŠ¥ - ä¸–ç•Œ",
        stBusiness: "æµ·å³¡æ—¶æŠ¥ - å•†ä¸š",
        stTech: "æµ·å³¡æ—¶æŠ¥ - ç§‘æŠ€",
        bbcNews: "BBCæ–°é—»",
        cnn: "CNN",
        reuters: "è·¯é€ç¤¾",
        associatedPress: "ç¾Žè”ç¤¾",
        timesOfIndia: "å°åº¦æ—¶æŠ¥"
    },
    ms: {
        language: "Bahasa:",
        newsSource: "Sumber Berita:",
        refresh: "ðŸ”„ Muat Semula Berita",
        loading: "Memuatkan berita...",
        error: "Tidak dapat memuatkan berita. Sila cuba lagi nanti.",
        retry: "Cuba Lagi",
        footer: "Â© 2024 Aplikasi Berita - Berita untuk Semua",
        readMore: "Baca Lagi",
        publishedAt: "Diterbitkan:",
        source: "Sumber:",
        noImage: "Tiada imej tersedia",
        generalNews: "Berita Umum",
        stSingapore: "Straits Times - Singapura",
        stAsia: "Straits Times - Asia",
        stWorld: "Straits Times - Dunia",
        stBusiness: "Straits Times - Perniagaan",
        stTech: "Straits Times - Teknologi",
        bbcNews: "Berita BBC",
        cnn: "CNN",
        reuters: "Reuters",
        associatedPress: "Associated Press",
        timesOfIndia: "Times of India"
    },
    hi: {
        language: "à¤­à¤¾à¤·à¤¾:",
        newsSource: "à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤¸à¥à¤°à¥‹à¤¤:",
        refresh: "ðŸ”„ à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤°à¥€à¤«à¥à¤°à¥‡à¤¶ à¤•à¤°à¥‡à¤‚",
        loading: "à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚...",
        error: "à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤²à¥‹à¤¡ à¤¨à¤¹à¥€à¤‚ à¤¹à¥‹ à¤¸à¤•à¥‡à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤ªà¥à¤¨à¤ƒ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤",
        retry: "à¤ªà¥à¤¨à¤ƒ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚",
        footer: "Â© 2024 à¤¸à¤®à¤¾à¤šà¤¾à¤° à¤à¤ª - à¤¸à¤­à¥€ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¤®à¤¾à¤šà¤¾à¤°",
        readMore: "à¤”à¤° à¤ªà¤¢à¤¼à¥‡à¤‚",
        publishedAt: "à¤ªà¥à¤°à¤•à¤¾à¤¶à¤¿à¤¤:",
        source: "à¤¸à¥à¤°à¥‹à¤¤:",
        noImage: "à¤•à¥‹à¤ˆ à¤›à¤µà¤¿ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚",
        generalNews: "à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤¸à¤®à¤¾à¤šà¤¾à¤°",
        stSingapore: "à¤¸à¥à¤Ÿà¥à¤°à¥‡à¤Ÿà¥à¤¸ à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ - à¤¸à¤¿à¤‚à¤—à¤¾à¤ªà¥à¤°",
        stAsia: "à¤¸à¥à¤Ÿà¥à¤°à¥‡à¤Ÿà¥à¤¸ à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ - à¤à¤¶à¤¿à¤¯à¤¾",
        stWorld: "à¤¸à¥à¤Ÿà¥à¤°à¥‡à¤Ÿà¥à¤¸ à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ - à¤µà¤¿à¤¶à¥à¤µ",
        stBusiness: "à¤¸à¥à¤Ÿà¥à¤°à¥‡à¤Ÿà¥à¤¸ à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ - à¤µà¥à¤¯à¤¾à¤ªà¤¾à¤°",
        stTech: "à¤¸à¥à¤Ÿà¥à¤°à¥‡à¤Ÿà¥à¤¸ à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ - à¤ªà¥à¤°à¥Œà¤¦à¥à¤¯à¥‹à¤—à¤¿à¤•à¥€",
        bbcNews: "à¤¬à¥€à¤¬à¥€à¤¸à¥€ à¤¸à¤®à¤¾à¤šà¤¾à¤°",
        cnn: "à¤¸à¥€à¤à¤¨à¤à¤¨",
        reuters: "à¤°à¥‰à¤¯à¤Ÿà¤°à¥à¤¸",
        associatedPress: "à¤à¤¸à¥‹à¤¸à¤¿à¤à¤Ÿà¥‡à¤¡ à¤ªà¥à¤°à¥‡à¤¸",
        timesOfIndia: "à¤Ÿà¤¾à¤‡à¤®à¥à¤¸ à¤‘à¤« à¤‡à¤‚à¤¡à¤¿à¤¯à¤¾"
    }
};

// Function to update UI text based on selected language
function updateLanguage(lang) {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update news source options
    updateNewsSourceOptions(lang);
    
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);
}

// Function to update news source dropdown options
function updateNewsSourceOptions(lang) {
    const newsSelect = document.getElementById('newsSource');
    const currentValue = newsSelect.value;
    
    // Clear existing options
    newsSelect.innerHTML = '';
    
    // Add options with translated labels
    const sources = [
        { value: 'general', key: 'generalNews' },
        { value: 'st-singapore', key: 'stSingapore' },
        { value: 'st-asia', key: 'stAsia' },
        { value: 'st-world', key: 'stWorld' },
        { value: 'st-business', key: 'stBusiness' },
        { value: 'st-tech', key: 'stTech' },
        { value: 'bbc-news', key: 'bbcNews' },
        { value: 'cnn', key: 'cnn' },
        { value: 'reuters', key: 'reuters' },
        { value: 'associated-press', key: 'associatedPress' },
        { value: 'the-times-of-india', key: 'timesOfIndia' }
    ];
    
    sources.forEach(source => {
        const option = document.createElement('option');
        option.value = source.value;
        option.textContent = translations[lang][source.key] || source.key;
        newsSelect.appendChild(option);
    });
    
    // Restore previous selection
    newsSelect.value = currentValue;
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
    const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
    const languageSelect = document.getElementById('language');
    languageSelect.value = savedLanguage;
    updateLanguage(savedLanguage);
});
